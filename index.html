<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>白鷺祭用語集</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js" defer></script>
    <script src="data.js" defer></script>
    <script src="sort.js" defer></script>
    <script src="script.js" defer></script>
</head>
<body>

<div id="view-home" class="view-container active">
    <div class="home-content">
        <div class="logo-area">
            <div class="logo-icon">🦢</div>
            <h1 class="app-title">白鷺祭用語集<br><span class="subtitle">サギ用語検索</span></h1>
        </div>

        <div class="home-search-wrapper">
            <input type="text" id="home-input" class="search-input-lg" placeholder="何を知りたいですか？">
            <button id="home-search-btn" class="search-btn-primary">検索</button>
        </div>


        <div class="home-categories">
            <p class="cat-label">カテゴリから探す</p>
            <div class="cat-grid">
                <button class="cat-card" data-cat="favorites">⭐ お気に入り</button>
                <button class="cat-card" data-cat="四役">👑 四役</button>
                <button class="cat-card" data-cat="企画部">🎉 企画部</button>
                <button class="cat-card" data-cat="情報部">💻 情報部</button>
                <button class="cat-card" data-cat="技術部">🛠 技術部</button>
                <button class="cat-card" data-cat="渉外部">🤝 渉外部</button>
            </div>
        </div>

        <button id="show-all-link" class="view-all-btn">用語一覧を見る ❯</button>
            <button id="map-fab-btn" class="map-fab-btn" aria-label="地図を開く">🗺️</button>
        <div class="home-footer">
            <a href="https://forms.gle/VD1gYno9abitxcDK7" target="_blank" rel="noopener noreferrer" class="text-link-btn">⚠️ 用語追加・不具合報告はこちら</a>
        </div>
    </div>


</div>

<div id="view-search-results" class="view-container hidden">
    <header class="result-header">
        <button id="back-btn" class="back-btn" aria-label="戻る">
            <span class="icon">‹</span>
        </button>
        <div class="header-search-box">
            <input type="text" id="result-input" placeholder="キーワード検索">
        </div>
    </header>

    <div class="filter-bar">
        <div id="tag-container" class="categories-scroll">
            <button class="chip" data-cat="favorites" style="font-weight:bold;">★ お気に入り</button>
            <button class="chip active" data-cat="all">すべて</button>
            
            <button class="chip" data-cat="四役">四役</button>
            <button class="chip" data-cat="企画部">企画部</button>
            <button class="chip" data-cat="情報部">情報部</button>
            <button class="chip" data-cat="技術部">技術部</button>
            <button class="chip" data-cat="渉外部">渉外部</button>

            <button class="chip" data-cat="八役">八役</button>
            
            
            <button class="chip" data-cat="機材">機材</button>
            <button class="chip" data-cat="物品">物品</button>
            <button class="chip" data-cat="作業">作業</button>
            <button class="chip" data-cat="場所">場所</button>
            
            <button class="chip" data-cat="新歓">新歓</button>
            <button class="chip" data-cat="本祭典">本祭典</button>
            <button class="chip" data-cat="全体">全体</button>
            <button class="chip" data-cat="他団体">他団体</button>
            
            <button class="chip" data-cat="その他">その他</button>
        </div>
        
        <label class="toggle-switch">
            <input type="checkbox" id="multi-select-toggle">
            <span class="slider"></span>
            <span class="label-text">複数選択</span>
        </label>
        
        <div class="filter-controls">
            
            <button id="filter-expand-btn" class="filter-toggle-btn">
                <span class="btn-text">タグをすべて見る</span>
                <span class="btn-icon">▼</span>
            </button>
            
            <div class="sort-controls-wrapper">
                <label class="sort-controls">
                    <span class="label-text">ソート:</span>
                    <select id="sort-method-select" class="sort-select">
                        <option value="tag">タグ順</option>
                        <option value="updated">更新順</option>
                        <option value="reading">名前（読み）</option>
                    </select>
                    <select id="sort-order-select" class="sort-select">
                        <option value="asc">昇順</option>
                        <option value="desc">降順</option>
                    </select>
                </label>
            </div>
            
            <button id="filter-close-btn" class="filter-toggle-btn" style="display:none;">
                <span class="btn-text">閉じる</span>
                <span class="btn-icon">▲</span>
            </button>
        </div>
        
        </div>

    <div class="container scrollable-content">
        <div class="result-count-area">
            <span id="result-count">0</span>件ヒット
        </div>
        <ul id="result-list">
            </ul>
        <div id="no-result" class="no-result">
            <p>見つかりませんでした</p>
            <button id="reset-search-btn">検索条件をリセット</button>
        </div>
    </div>
</div>

<div id="modal-overlay" class="modal-overlay hidden">
    <div class="modal-card">
        <button id="modal-fav-btn" class="modal-fav-btn">☆</button>
        <button id="modal-close-btn" class="modal-close-btn">×</button>
        <div class="modal-header">
            <h2 id="modal-term">用語名</h2>
            <div id="modal-badges" class="badges-wrapper"></div>
        </div>
        <div class="modal-body">
            <p id="modal-description">ここに詳細説明が入ります。</p>
        </div>
    </div>
</div>

<div id="view-map" class="view-container hidden">
    <header class="result-header" style="justify-content: space-between;">
        <select id="map-campus-select" class="map-header-select">
            <option value="nakamozu">中百舌鳥キャンパス</option>
        </select>

        <button id="map-search-btn" class="map-header-btn" aria-label="検索に戻る">
            🔍
        </button>
    </header>

    <div class="map-wrapper" id="map-wrapper">
        <div class="map-content" id="map-content">
            <img src="https://placehold.jp/3d4070/ffffff/1000x1000.png?text=Map%20Test" alt="会場地図" class="map-image" id="map-image">
        </div>
    </div>

    <div class="map-controls">
        <button id="zoom-in" class="zoom-btn">＋</button>
        <button id="zoom-reset" class="zoom-btn">↺</button>
        <button id="zoom-out" class="zoom-btn">－</button>
    </div>
</div>

</body>
</html>